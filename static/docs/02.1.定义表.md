# 数据的正删改查

定义数据在时候，坚持两个原则 

1.DRY.  
2. 因果关系显试声明


### 数据的定义：

```java

@Tbl
public class UserInfo extends OEntity {
    @Col(nullable = false, size=32,unique=true)
	private String name;
    @Col(nullable = true, size=64)
    private String passwd;
    @Col(nullable = true, size=255)
    private String avatar;
    @Col(nullable = true, valRef = UserGenre.class)
    private Integer genre;

	//Getter&Setter ...
}


@Tbl(extend=UserInfo.class)
public class UserProfile extends OEntity{
    @Col(nullable = false, size=20)
	private String nickname;
    @Col(nullable = false)
	private Boolean gender;
    @Col(nullable = false, size=16)
	private String phone;

	//Getter&Setter ...
}


@Tbl
public class UserFriend extends OEntity{
	@Col(ref=UserInfo.class,nullable = false)
	private Long userId;
	@Col(ref=UserInfo.class,nullable = false)
	private Long friendId;
	
	//Getter&Setter ...
}


// 国际化常量

@I18nCfg("zh")
public class UserGenre {
	@I18nCfgBrief("男")
	public static final int MALE = 1;
	@I18nCfgBrief("女")
	public static final int FAMALE = 2;

	//Getter&Setter ...
}

```

   1. 所有在表必须继承 OEntity，且使用@Tbl标注该POJO
   2. 对于类型数据，如UserInfo中的genre，可使用valRef建立关系。好处如下：
       1. 插入修改时，框架会为之作校验，避免错误数据在引入。
       2. 再书写和阅读代码时，不需要记忆，回想，常量定义在位置，肯名称。
       3. 和国际话数据统一处理。  
   3. 当用户数据信息类型需要添加时，除了添加字段外还可以横向扩展，如：UserProfile


